<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="./lib/bs/css/bootstrap.min.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="static/css/common.css"/>
    <!--_meta 作为公共模版分离出去-->
    
    <!--请在下方写此页面业务相关的CSS-->
    <title>首页</title>
    <link rel="stylesheet" type="text/css" href="./lib/bsdate/css/bootstrap-datetimepicker.css"/>
	<link rel="stylesheet" type="text/css" href="./static/css/index.css">
  </head>
  <body>
  <!--顶部导航-->
  <header class="clearfix">
	  <nav class="navbar navbar-inverse">
		  <div class="container-fluid">
			  <div class="row">
				  <div class="col-md-3">
					  <div class="navbar-header">
						  <a class="navbar-brand" href="index.html">
							  <img src="static/img/jzlogo.png" alt="logo" />
							  <h1>重庆渐臻机动车大数据平台</h1>
						  </a>
					  </div>
				  </div>
				  <div class="col-md-9 right-nav" >
					  <div class="collapse navbar-collapse">
						  <!--主导航-->
						  <ul class="nav navbar-nav index-nav">
							  <li class="dropdown">
								  <a href="#" class="dropdown-toggle">
									  <i class="iconfont">&#xe607;</i>智能研判
								  </a>
								  <ul class="dropdown-menu">
									  <li><a href="weizhangdongtu.html">违章动图</a></li>
									  <li><a href="weizhangguiji.html">违章轨迹</a></li>
									  <li><a href="taopaifenxi.html">套牌分析</a></li>
								  </ul>
							  </li>
							  <li class="dropdown">
								  <a href="#" class="dropdown-toggle">
									  <i class="iconfont">&#xe684;</i>智能查询
								  </a>
								  <ul class="dropdown-menu">
									  <li><a href="jiashiyuan-query.html">驾驶员查询</a></li>
									  <li><a href="car-query.html">车辆查询</a></li>
									  <li><a href="luduan-query.html">路段查询</a></li>
									  <li><a href="xinche-query.html">新车查询</a></li>
									  <li><a href="jingxi-query.html">精细查询</a></li>
								  </ul>
							  </li>
							  <li class="dropdown">
								  <a href="#" class="dropdown-toggle" >
									  <i class="iconfont">&#xe618;</i>数据统计
								  </a>
								  <ul class="dropdown-menu">
									  <li><a href="cheliangyongyoulaing.html">车辆拥有量统计</a></li>
									  <li><a href="jiashirentongji.html">驾驶人统计</a></li>
									  <li><a href="pincifenxi.html">频次分析</a></li>
									  <li><a href="weizhangleixingtongji.html">违章类型统计</a></li>
								  </ul>
							  </li>
							  <li class="dropdown">
								  <a href="#" class="dropdown-toggle">
									  <i class="iconfont">&#xe701;</i>数据分析
								  </a>
								  <ul class="dropdown-menu">
									  <li><a href="jiashiyuanpinggu.html">驾驶员评估</a></li>
									  <li><a href="cheliangpinggu.html">车辆评估</a></li>
								  </ul>
							  </li>
							  <li><a href="#"><i class="iconfont">&#xe623;</i>车信息库</a></li>
						  </ul>

						  <ul class="nav navbar-nav navbar-right admin-nav">
							  <li class="dropdown">
								  <a href="#" class="dropdown-toggle">
									  <img src="static/img/u19.png" alt="" />&nbsp;&nbsp;&nbsp;&nbsp;管理员
								  </a>
								  <div class="dropdown-menu panel panel-default">
									  <div class="user-info">
										  <img src="static/img/user.png" alt="" />
										  <p>身份：管理员</p>
									  </div>
									  <p class="pull-right">
										  <a href="" class="btn btn-primary">账户管理</a>
										  <a href="" class="btn btn-primary">退出系统</a>
									  </p>
								  </div>
							  </li>
						  </ul>
					  </div>
				  </div>
			  </div>
		  </div>
	  </nav>
  </header>
  <!--_header 作为公共模版分离出去-->
		
		
	<div class="container-fluid index-main">
		<div class="row row1">
			<div class="col-md-3">
				<p>
					违章总数
					<span>238,968,2</span>
				</p>
				<p>
					今日新增
					<span>000,238,2</span>
				</p>
				<div class="panel panel-default">
					<div class="panel-heading title">
						违章热点路段
					</div>
					<div class="panel-body">
						<ul class="list-group">
							<li class="list-group-item">
								<span class="badge">223,1</span>
								两路口
							</li>
							<li class="list-group-item">
								<span class="badge">182,1</span>
								渝澳大桥
							</li>
							<li class="list-group-item">
								<span class="badge">121,0</span>
								龙水镇龙谷路闯禁卡2
							</li>
							<li class="list-group-item">
								<span class="badge">899</span>
								两路口
							</li>
							<li class="list-group-item">
								<span class="badge">14</span>
								两路口
							</li>
							<li class="list-group-item">
								<span class="badge">14</span>
								两路口
							</li>
							<li class="list-group-item">
								<span class="badge">14</span>
								两路口
							</li>
							<li class="list-group-item">
								<span class="badge">14</span>
								两路口
							</li>
							<li class="list-group-item">
								<span class="badge">223,1</span>
								两路口
							</li>
							<li class="list-group-item">
								<span class="badge">182,1</span>
								渝澳大桥
							</li>
							<li class="list-group-item">
								<span class="badge">121,0</span>
								龙水镇龙谷路闯禁卡2
							</li>
						</ul>
					</div>
				</div>

			</div>

			<div class="col-md-6 cqmap">
				<p>
					重庆市总路段数
					<span>8,968,2</span>
				</p>
				<!--地图-->
				<div id="map" style="width:100%;height:700px"></div>
			</div>
			<div class="col-md-3">

				<div id="pie" style="width:400px;height:600px"></div>

			</div>
		</div>
		<div class="row row2">
			<div class="col-md-3">
				<div class="panel panel-default">
					<div class="panel-heading title">
						违章热点时间
					</div>
					<div class="panel-body">
						<ul class="list-group">
							<li class="list-group-item">
								<span class="badge">223,1</span>
								11：00-12：00
							</li>
							<li class="list-group-item">
								<span class="badge">223,1</span>
								11：00-12：00
							</li>
							<li class="list-group-item">
								<span class="badge">223,1</span>
								11：00-12：00
							</li>
							<li class="list-group-item">
								<span class="badge">223,1</span>
								11：00-12：00
							</li>
							<li class="list-group-item">
								<span class="badge">223,1</span>
								11：00-12：00
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="panel panel-default">
					<div class="panel-heading title">
						违章热点类型
					</div>
					<div class="panel-body">
						<ul class="list-group">
							<li class="list-group-item">
								<span class="badge">223,1</span>
								违规停车
							</li>
							<li class="list-group-item">
								<span class="badge">223,1</span>
								超速
							</li>
							<li class="list-group-item">
								<span class="badge">223,1</span>
								闯红灯
							</li>
							<li class="list-group-item">
								<span class="badge">223,1</span>
								占道
							</li>
							<li class="list-group-item">
								<span class="badge">223,1</span>
								占道
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="panel panel-default panel-span">
					<div class="panel-heading title">
						<span>车牌号</span>
						<span>车牌类型</span>
						<span>违章路段</span>
					</div>
					<div class="panel-body">
						<ul class="list-group">
							<li class="list-group-item">
								<span>渝A66666</span>
								<span>不礼让行人</span>
								<span>机场东路与像赶路交汇口西北侧道路</span>
							</li>
							<li class="list-group-item">
								<span>渝A66666</span>
								<span>不礼让行人</span>
								<span>违章路段</span>
							</li>
							<li class="list-group-item">
								<span>渝A66666</span>
								<span>不礼让行人</span>
								<span>违机场东路与像赶路交汇口西北侧道路</span>
							</li>
							<li class="list-group-item">
								<span>渝A66666</span>
								<span>不礼让行人</span>
								<span>违章路段</span>
							</li>
							<li class="list-group-item">
								<span>渝A66666</span>
								<span>不礼让行人</span>
								<span>机场东路与像赶路交汇口西北侧道路</span>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
		



    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="./lib/bs/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="./lib/bs/js/bootstrap.min.js"></script>
	<script src="./static/js/common.js"></script>

  <!--<script src="./lib/js/jquery-1.11.0.min.js" type="text/javascript"></script>-->
  <!--<script src="./lib/js/jquery.waypoints.min.js"></script>-->
  <!--<script type="text/javascript" src="./lib/js/jquery.countup.min.js"></script>-->
  <!--<script type="text/javascript">-->
      <!--$('.index-main p span').countUp();-->
  <!--</script>-->

    <script src="./lib/bsdate/js/bootstrap-datetimepicker.min.js"></script>
	<script src="./lib/echarts/echarts.js" ></script>
    <script type="text/javascript">
        var res = [
            {name:'广场路（宝城中学）',value:[105.598033,29.415024,100]},
            {name:'兴荣路（行政服务中心）',value:[105.618136,29.420932,200]},
            {name:'向阳路（中华奥城）',value:[105.621269,29.423722,102]},
            {name:'迎宾大道川三文曲苑对面1',value:[105.616699,29.412513,200]},
            {name:'东益当街',value:[105.602689,29.410201,20]},
            {name:'昌龙大道与瑞尔支路路口',value:[105.630171,29.414218,10]},
            {name:'荣滨北路（拓新红城龙吟门）',value:[105.593646,29.419493,50]},
            {name:'北环二路城市花园1',value:[105.593276,29.404811,200]},
            {name:'昌州大道(69队转盘)',value:[105.623243,29.419482,10]},
            {name:'广场路(玉屏小学)',value:[105.601243,29.41243,300]},
            {name:'中科路与昌州大道路口',value:[105.588394,29.407483,20]}
        ]

        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('map'));
        var cqData = null;
        //绘制重庆地图
        $.getJSON('./lib/echarts/cq.json', function(data){
            d = [];
            for( var i=0;i<data.features.length;i++ ){
                d.push({
                    name:data.features[i].properties.name
                })
            }
            mapdata = d;
            //注册地图
            echarts.registerMap('chongqing', data);
            //绘制地图
            renderMap('chongqing',d);

            cqData = data;
        });


        //初始化绘制重庆地图配置
        var option = {
           // backgroundColor: '#000',
            title : {
                text: '重庆地图下钻至县级',
                left: 'center',
                textStyle:{
                    color: '#fff',
                    fontSize:16,
                    fontWeight:'normal',
                    fontFamily:"Microsoft YaHei"
                },
                subtextStyle:{
                    color: '#ccc',
                    fontSize:13,
                    fontWeight:'normal',
                    fontFamily:"Microsoft YaHei"
                }
            },
            tooltip: {
                trigger: 'item',
                formatter: '{b}'
            },
            geo: {//地理坐标系组件
                map: 'chongqing',
                label: {
                    emphasis: {
                        show: false
                    }
                },
                roam: true,//是否开启鼠标缩放和平移漫游
                itemStyle: {
                    normal: {
                        areaColor: '#323c48',
                        borderColor: '#111'
                    },
                    emphasis: {
                        areaColor: '#2a333d'
                    }
                }
            },
            animationDuration:1000,
            animationEasing:'cubicOut',
            animationDurationUpdate:1000
        };

        // 绘制地图
        function renderMap(map,data){
            option.title.subtext = map;
            option.series = [
                {
                    name: map,
                    type: 'map',
                    mapType: map,
                    roam: false,
                    nameMap:{
                        'cq':'重庆'
                    },
                    zoom: 1.2,
                    itemStyle: {
                        normal: {
                            areaColor: '#010E26',
                            borderColor: 'dodgerblue'
                        },
                        emphasis: {
                            areaColor: 'darkorange'
                        }
                    },
                    data:data
                },
                {
                    name: 'pm2.5',
                    type: 'scatter',
                    coordinateSystem: 'geo',
                    //data: convertData(data),
					data: res,
                    symbolSize: function (val) {
                        return val[2];
                    },
                    label: {
                        normal: {
                            formatter: '{b}',
                            position: 'right',
                            show: false
                        },
                        emphasis: {
                            show: true
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: 'purple'
                        }
                    }
                },

            ];
            //渲染地图
            myChart.setOption(option);
        }

        //地图点击事件
        myChart.on('click', function (params) {
			$('.index-main p').html(params.name + '卡口总数：<span>11,111</span>');
            //console.log( params );
            // 当前点击对象
            var now = null;
            for(var i = 0; i < cqData.features.length; i++){
                if(cqData.features[i].properties.name == params.name){
                    now = cqData.features[i];
                }
            }
            //console.log(now.geometry);
            var childData = {}
            childData.type = "FeatureCollection";
            childData.features = [];
            childData.features.push(now);

            console.log(childData);
            //console.log()
            // 注册地图
            echarts.registerMap(params.name, childData);
            d = [];
            // 绘制地图
            renderMap(params.name,d);

        });

        myChart.on('dblclick',function(){
           // $('.index-main p').html(重庆市 + '卡口总数：<span>11,111</span>');
            console.log(99999);
            //绘制重庆地图
            $.getJSON('./lib/echarts/cq.json', function(data){
                d = [];
                for( var i=0;i<data.features.length;i++ ){
                    d.push({
                        name:data.features[i].properties.name
                    })
                }
                mapdata = d;
                //注册地图
                echarts.registerMap('重庆市', data);
                //绘制地图
                renderMap('重庆市',d);

                cqData = data;
            });
        });

        // 南丁格尔玫瑰图
        var pieChart = echarts.init(document.getElementById('pie'));
        var pieOption = {
            title : {
                text: '南丁格尔玫瑰图',
                subtext: '纯属虚构',
                x:'center'
            },
            tooltip : {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                x : 'center',
                y : 'bottom',
                data:['rose1','rose2','rose3','rose4','rose5','rose6','rose7','rose8']
            },
            calculable : true,
            series : [
//                {
//                    name:'半径模式',
//                    type:'pie',
//                    radius : [20, 110],
//                    center : ['25%', '50%'],
//                    roseType : 'radius',
//                    label: {
//                        normal: {
//                            show: false
//                        },
//                        emphasis: {
//                            show: true
//                        }
//                    },
//                    lableLine: {
//                        normal: {
//                            show: false
//                        },
//                        emphasis: {
//                            show: true
//                        }
//                    },
//                    data:[
//                        {value:10, name:'rose1'},
//                        {value:5, name:'rose2'},
//                        {value:15, name:'rose3'},
//                        {value:25, name:'rose4'},
//                        {value:20, name:'rose5'},
//                        {value:35, name:'rose6'},
//                        {value:30, name:'rose7'},
//                        {value:40, name:'rose8'}
//                    ]
//                },
                {
                    name:'面积模式',
                    type:'pie',
                    radius : [30, 150],
                    center : ['50%', '50%'],
                    roseType : 'area',
                    data:[
                        {value:10, name:'rose1'},
                        {value:5, name:'rose2'},
                        {value:15, name:'rose3'},
                        {value:25, name:'rose4'},
                        {value:20, name:'rose5'},
                        {value:35, name:'rose6'},
                        {value:30, name:'rose7'},
                        {value:40, name:'rose8'}
                    ]
                }
            ]
        };
	pieChart.setOption(pieOption);
	</script>
    

  </body>
</html>
