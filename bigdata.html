<!doctype html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
  <title>重庆市南岸区天文街道就业动车服务中心</title>
  <link rel="stylesheet" type="text/css" href="static/css/bigdata.css" />
  <link rel="stylesheet" type="text/css" href="static/layer/theme/default/layer.css" />
</head>

<body id="bigdata">
	<!--顶部-->
	<div class="header">
		<div class="header-border-top"></div>
		<div class="container">
			<div class="date"></div>
			<div class="header-title">天文街道就业动车服务平台</div>
			<a href="./index.html" class="gohome"></a>
		</div>
		<div class="header-border-bottom"></div>
	</div>

	<!--内容区域-->
	<div class="bigdata-content">
		<div class="container">
			<div class="section1">
				<!--就业创业共建单位-->
				<div class="section-item">
					<div class="section-item-title">
						<h2>就业创业共建单位</h2>
						<p>Employment and entrepreneurship</p>
					</div>
					<div class="section-item-content">
						<ul class="section-item-list" id="cygj"></ul>
					</div>
				</div>

				<!--就业动车岗位分类展示-->
				<div class="section-item">
					<div class="section-item-title">
						<h2>就业动车岗位分类展示</h2>
						<p>Channel shunt</p>
					</div>
					<div class="section-item-content barchart">
						<!--柱状图-->
						<div id="barchart"></div>
					</div>
				</div>
			</div>

			<div class="section2">
				<!--顶部数据展示-->
				<div class="section2-top-data">
					<div class="item-level">
						<div class="item-level-one">
							<span>服务人群</span>
							<span><ol class="fwrq"></ol><em>人</em></span>
						</div>

						<ul class="item-level-two">
							<li data-title="线上登记库" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/hrlibs.html">
								<span>线上登记库</span>
								<span><b class="xsdjk"></b>人</span>
							</li>
							<li data-title="失业人员" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/sylist.html">
								<span>失业人员</span>
								<span><b class="shiye"></b>人</span>
							</li>
							<li data-title="低保户" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/dibaohu.html">
								<span>低保户</span>
								<span><b class="dibao"></b>人</span>
							</li>
							<li data-title="高校毕业生" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/gxbys.html">
								<span>高校毕业生</span>
								<span><b class="gaoxiao"></b>人</span>
							</li>
							<li data-title="就业困难人员" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/kunnan.html">
								<span>就业困难人员</span>
								<span><b class="kunnan"></b>人</span>
							</li>
						</ul>
					</div>

					<div class="item-level">
						<div class="item-level-one">
							<span>公益性岗位</span>
							<span><ol class="gongyi"></ol><em>人</em></span>
						</div>

						<ul class="item-level-two">
							<li data-title="夜市摊位数" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/booth.html">
								<span>夜市摊位数</span>
								<span><b class="yeshi"></b>人</span>
							</li>
							<li data-title="创业一条街" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/shops.html">
								<span>创业一条街</span>
								<span><b class="chuangye"></b>人</span>
							</li>
							<li data-title="定向帮扶" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/jpdxbf.html">
								<span>定向帮扶</span>
								<span><b class="dxbf"></b>人</span>
							</li>
						</ul>
					</div>

					<div class="item-level">
						<div class="item-level-one">
							<span>成功服务量</span>
							<span><ol class="chenggong"></ol><em>人</em></span>
						</div>

						<ul class="item-level-two last">
							<li data-title="线下成功就业人员" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/feedback.html">
								<span>线下成功<br/>就业人员</span>
								<span><b class="xianxia"></b>人</span>
							</li>
							<li data-title="线上自动配对成功人员" data-href="http://tianwen.xnshequ.com/ssadmin/bigdata/employed.html">
								<span>线上自动配<br/>对成功人员</span>
								<span><b class="xianshang"></b>人</span>
							</li>
						</ul>
					</div>
				</div>

				<!--重庆地图-->
				<div class="section2-chart">
					<div id="mapchart"></div>
				</div>

			</div>

			<div class="section3">
				<!--就业动车社会效益展示-->
				<div class="section-item">
					<div class="section-item-title">
						<h2>就业动车社会效益展示</h2>
						<p>Social benefit display</p>
					</div>
					<div class="section-item-content">
						<div class="section3-tab-btn">
							<a href="javascript:;" class="active">服务人群</a>
							<a href="javascript:;">服务单位</a>
							<a href="javascript:;">夜市摊位</a>
							<a href="javascript:;">创业街</a>
							<a href="javascript:;">公益岗位</a>
						</div>

						<div class="section3-tab-content">
							<ul class="section-item-list jyfwrq active"></ul>
							<ul class="section-item-list fwdw"></ul>
							<ul class="section-item-list booth"></ul>
							<ul class="section-item-list shops"></ul>
							<ul class="section-item-list gygw"></ul>
						</div>

					</div>
				</div>

				<!--就业动车实时动态-->
				<div class="section-item">
					<div class="section-item-title">
						<h2>就业动车实时动态</h2>
						<p>Real time dynamic</p>
					</div>
					<div class="section-item-content">
						<ul class="section-item-list section3-list">
							<ul>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="footerchart">
		<div class="container">
			<!--就业动车网格服务人力分布图-->
			<div class="section-item footer-left-item">
				<div class="section-item-title">
					<h2>就业动车网格服务人力分布图</h2>
					<p>Grid service area diagram</p>
				</div>
				<div class="piechart-wrap">
					<div class="piechart">
						<div id="piechart1" style="width:260px;height:240px;"></div>
						<p>年龄</p>
					</div>    
					<div class="piechart">
						<div id="piechart2" style="width:260px;height:240px;"></div>
						<p>学历</p>
					</div>
					<div class="piechart">
						<div id="piechart3" style="width:260px;height:240px;"></div>
						<p>政治面貌</p>
					</div>
					<div class="piechart">
						<div id="piechart4" style="width:260px;height:240px;"></div>
						<p>就业困难人员</p>
					</div>
					<div class="piechart">
						<div id="piechart5" style="width:260px;height:240px;"></div>
						<p>大学毕业生</p>
					</div>

					<div class="piechart">
						<div id="piechart6" style="width:260px;height:240px;"></div>
						<p>性别</p>
					</div>

					<div class="piechart">
						<div id="piechart7" style="width:260px;height:240px;"></div>
						<p>就业状态</p>
					</div>

					<div class="piechart">
						<div id="piechart8" style="width:260px;height:240px;"></div>
						<p>残疾</p>
					</div>
				</div>
			</div>

			<!--就业动车关注度(月)-->
			<div class="section-item footer-right-item">
				<div class="section-item-title">
					<h2>就业动车关注度（月）</h2>
					<p>Channel shunt</p>
				</div>
				<div id="linechart" style="width: 487px;height:240px;"></div>
			</div>
		</div>
	</div>
<script src="static/js/common.js"></script>
<script src="static/js/jquery-1.11.0.min.js" type="text/javascript" charset="utf-8"></script>
<script src="static/js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
<script src="static/layer/layer.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
			$(function() {
				// 就业创业共建单位
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/cygj?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						//console.log(res.data)
						var str = '';
						for(var i = 0; i < res.data.length; i++) {
							str += "<li>"
							if(i < 3) {
								str += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								str += "<span>" + (i + 1) + "</span>"
							}

							if(res.data[i].cp_name.length > 18) {
								var cp_name = res.data[i].cp_name.substr(0, 18) + '...';
							} else {
								var cp_name = res.data[i].cp_name
							}

							//console.log(cp_name)
							str += "<span>" + cp_name + "</span>" +
								"<span>" + res.data[i].num + "人</span>" +
								"</li>"
						}

						$('#cygj').append(str);
					}
				});

				// 服务人群，公益性岗位，成功服务量
				tongjiDom()
				// 10S钟刷新
//				setInterval(function() {
//					tongjiDom()
//				}, 5000)

				function tongjiDom() {
					$.ajax({
						type: "get",
						url: "http://tianwen.xnshequ.com/tongji_jiuye/t3?jsoncallback=?",
						dataType: "jsonp",
						success: function(res) {
							// 服务人群
							var fwrq = res.data.fwrq;
							//console.log($('.fwrq').text());
							var oldNum = $('.fwrq .old').text();
							//console.log(oldNum)
							$('.fwrq').html(updateNum(oldNum, fwrq.fwrq));
							$('.xsdjk').text(fwrq.xsdjk);
							$('.shiye').text(fwrq.shiye);
							$('.dibao').text(fwrq.dibao);
							$('.gaoxiao').text(fwrq.gaoxiao);
							$('.kunnan').text(fwrq.kunnan);

							// 公益性岗位
							var gongyi = res.data.gongyi;
							var oldNum = $('.gongyi .old').text();
							$('.gongyi').html(updateNum(oldNum, gongyi.yeshi * 1 + gongyi.chuangye * 1 + gongyi.dxbf * 1));
							$('.yeshi').text(gongyi.yeshi);
							$('.chuangye').text(gongyi.chuangye);
							$('.dxbf').text(gongyi.dxbf);

							// 成功服务量
							var chenggong = res.data.chenggong;
							var oldNum = $('.chenggong .old').text();
							$('.chenggong').html(updateNum(oldNum, chenggong.xianxia * 1 + chenggong.xianshang * 1));
							$('.xianxia').text(chenggong.xianxia);
							$('.xianshang').text(chenggong.xianshang);
						}
					});
				}

				// 就业动车社会效益展示
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/sbd?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						//console.log(res.data)
						var fwrqStr = '';
						for(var i = 0; i < res.data.fwrq.length; i++) {
							fwrqStr += "<li>"
							if(i < 3) {
								fwrqStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								fwrqStr += "<span>" + (i + 1) + "</span>"
							}
							fwrqStr += "<span>" + res.data.fwrq[i].ptype + "</span>" +
								"<span>" + res.data.fwrq[i].num + "人</span>" +
								"</li>"
						}
						// 服务人群
						$('.jyfwrq').append(fwrqStr)

						var fwdwStr = '';
						for(var i = 0; i < res.data.fwdw.length; i++) {
							fwdwStr += "<li>"
							if(i < 3) {
								fwdwStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								fwdwStr += "<span>" + (i + 1) + "</span>"
							}
							fwdwStr += "<span>" + res.data.fwdw[i].cp_name + "</span>" +
								"<span>" + res.data.fwdw[i].num + "人</span>" +
								"</li>"
						}
						// 服务单位
						$('.fwdw').append(fwdwStr)

						var boothStr = '';
						for(var i = 0; i < res.data.booth.length; i++) {
							boothStr += "<li>"
							if(i < 3) {
								boothStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								boothStr += "<span>" + (i + 1) + "</span>"
							}
							boothStr += "<span>" + res.data.booth[i].type + "</span>" +
								"<span>" + res.data.booth[i].jy_num + "人</span>" +
								"</li>"
						}
						// 夜市摊位
						$('.booth').append(boothStr)

						var shopsStr = '';
						for(var i = 0; i < res.data.shops.length; i++) {
							shopsStr += "<li>"
							if(i < 3) {
								shopsStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								shopsStr += "<span>" + (i + 1) + "</span>"
							}
							shopsStr += "<span>" + res.data.shops[i].sp_name + "</span>" +
								"<span>" + res.data.shops[i].jy_num + "人</span>" +
								"</li>"
						}
						// 创业街
						$('.shops').append(shopsStr)

						var gygwStr = '';
						for(var i = 0; i < res.data.gygw.length; i++) {

							gygwStr += "<li>"
							if(i < 3) {
								gygwStr += "<span style='background:#E58B26;'>" + (i + 1) + "</span>"
							} else {
								gygwStr += "<span>" + (i + 1) + "</span>"
							}
							gygwStr += "<span>" + res.data.gygw[i].cp_name + "</span>" +
								"<span>" + res.data.gygw[i].ac_name + "</span>" +
								"</li>"
						}
						// 公益岗位
						$('.gygw').append(gygwStr)
					}
				});

				$('.section3-tab-btn a').each(function() {
					$(this).on('click', function() {
						var index = $(this).index()
						$(this).addClass('active').siblings().removeClass('active');
						$('.section3-tab-content ul').eq(index).addClass('active').siblings().removeClass('active');
					})
				})

				// 就业动车岗位分类展示
				var xData = [];
				var barData = [];
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/jobcate?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						//console.log(res.data)
						xData = ['服务类', '技术类', '销售类', '质检类', '其他类']
						barData = [res.data.fwl_count, res.data.jsl_count, res.data.xsl_count, res.data.zjl_count, res.data.qtl_count];
						barChartFn(xData, barData)
					}
				});

				//就业动车实时动态
				jydcDom()

				// 5S钟刷新1次
//				setInterval(function() {
//					jydcDom()
//				}, 5000)

				function jydcDom() {
					$.ajax({
						type: "get",
						url: "http://tianwen.xnshequ.com/tongji_jiuye/rtdynamic?jsoncallback=?",
						dataType: "jsonp",
						success: function(res) {
							//console.log(res)
							var str = '';
							str += "	<li><span>用户名</span><span>时间</span></li>";
							for(var i = 0; i < res.data.users.length; i++) {
								if(res.data.users[i].nick_name.length > 10) {
									var nick_name = res.data.users[i].nick_name.substr(0, 10) + '...'
								} else {
									var nick_name = res.data.users[i].nick_name
								}

								var time = formatDateTime(res.data.users[i].last_time * 1000)

								str += "<li>" +
									"<span>" + nick_name + "</span>" +
									"<span>" + time + "</span>" +
									"</li>"
							}

							$('.section3-list').html(str);

						}
					});
				}

				//就业动车关注度
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/channel?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						//console.log(res)
						var xlineData = res.xaxis_data;
						var linejobData = res.series_job;
						var linehelpData = res.series_help;
						var linetrainData = res.series_train;
						var linepublicData = res.series_public;
						lineChartFn(xlineData, linejobData, linehelpData, linetrainData, linepublicData)
					}
				});

				// 就业动车网格服务人力分布图
				$.ajax({
					type: "get",
					url: "http://tianwen.xnshequ.com/tongji_jiuye/grid?jsoncallback=?",
					dataType: "jsonp",
					success: function(res) {
						//console.log(res)
						pieChart1Fn(res.data.age);
						pieChart2Fn(res.data.education);
						pieChart3Fn(res.data.zzmm);
						pieChart4Fn(res.data.kunnan);
						pieChart5Fn(res.data.daxue);
						pieChart6Fn(res.data.sex);
						pieChart7Fn(res.data.getjob);
						pieChart8Fn(res.data.canji);

						// 饼图轮播
						var n = 0;
						setInterval(function() {
							n++;
							$('.piechart-wrap').css({
								'transform': 'translateX(' + -21.6 * n + 'rem)'
							});
							if(n > 2) {
								n = 0;
							}
						}, 5000)

					}
				});


				// 重庆区域地图
				//绘制重庆地图
				mapFn()
				
//				setInterval(function(){
//					mapFn();
//				},15000)
//				setInterval(function(){
//					mapScatterFn();
//				},1000)
				
				
				var mapChart = echarts.init(document.getElementById('mapchart'));
				$.getJSON('./static/js/cq.json', function(data) {
					d = [];
					for(var i = 0; i < data.features.length; i++) {
						d.push({
							name: data.features[i].properties.name
						})
					}
					mapdata = d;
					//注册地图
					echarts.registerMap('chongqing', data);
	
					mapChart.setOption(option = {
						backgroundColor: '#0C0026',
						tooltip: {
							trigger: 'item',
							padding: 10,
							formatter: function(params) {
								return params.name + '<br/>' + '户籍所在地 ： ' + params.value + '人' + '<br/>现居地 ： ' + params.data.num + '人';
							}
						},
							
						geo: {
							map: 'chongqing',
							label: {
								emphasis: {
									show: true,
									textStyle: {
										color: '#fff'
									}
								}
							},
							zoom: 1.2,
							roam: false,
						},
						
					})
				})
				function mapFn(){
				
					$.ajax({
						type: "get",
						url: "http://tianwen.xnshequ.com/tongji_jiuye/map?jsoncallback=?",
						dataType: "jsonp",
						success: function(res) {
							//console.log(res)
							var mapData = [];
	
							var list = res.data.list
	
							for(var i = 0; i < list.length; i++) {
								mapData.push({
									name: list[i].name,
									value: list[i].hj_num * 1,
									num: list[i].num * 1
								})
							}
							
							option = {
								color:'red',
								visualMap: {
									min: 0,
									max: 3500,
									text: ['高', '低'],
									realtime: false,
									calculable: true,
									itemWidth: 10,
									inRange: {
										color: ['#2751e3', '#52b2fe', '#35a4fe', '#52b2fe']
										//color: ['#52b2fe','#35a4fe','#52b2fe','#2751e3']
										//color: ['#50a3ba', '#eac736', '#d94e5d']
									},
									textStyle: {
										color: '#fff'
									}
								},
								series:[{
						                    type: 'map',
						                    mapType: 'chongqing',
						                    roam: false,
						                    nameMap:{
						                        'cq':'重庆'
						                    },
						                    zoom: 1.2,
						                    itemStyle: {
						                        normal: {
						                            areaColor: '#52b2fe',
						                            borderColor: '#6ad7ff'
						                        },
						                        emphasis: {
						                            areaColor: 'darkorange'
						                        }
						                    },
						                    data: mapData,
						                    zlevel: 0,
						               }]
							} 
							mapChart.setOption(option)
						}
					});
				}
			
				function mapScatterFn(){
					var scatterData = [];
					$.ajax({
						type: "get",
						url: "http://tianwen.xnshequ.com/tongji_jiuye/mpdynamic?jsoncallback=?",
						dataType: "jsonp",
						success: function(res) {
							var users = res.data.users;
							//console.log(users)
							if(users.length > 0){
								for(var i=0;i<users.length;i++){
									scatterData.push({name:users[i].user_name,value:[users[i].lng,users[i].lat]})
								}
								
								option.series[1] = {
									name: '用户坐标',
									type: 'effectScatter',
									coordinateSystem: 'geo',
									data: scatterData,
								  	showEffectOn: 'render',
						            rippleEffect: {
						                brushType: 'stroke'
						            },
						            symbolSize: 10,
						            hoverAnimation: true,
						            label: {
						                normal: {
						                    formatter: '{b}',
						                    position: 'right',
						                    show: true,
						                    color:'#fff',
						                    
						                }
						            },
						          
						            tooltip: {
						            	trigger: 'item',
						            	formatter: '{b}'
						            },
						            itemStyle: {
						                normal: {
						                    color: 'red',
						                    shadowBlur: 10,
						                    shadowColor: '#333'
						                }
						            },
						            zlevel: 10,
						            z: 100
								}
								mapChart.setOption(option)
							}
						}
					})
					
					
				}

				
				

				// 柱状图
				// 基于准备好的dom，初始化echarts实例
				var barChart = echarts.init(document.getElementById('barchart'));
				function barChartFn(xData, barData) {
					var barOption = {
						color: ['#3398DB'],
						tooltip: {
							trigger: 'axis',
							axisPointer: { // 坐标轴指示器，坐标轴触发有效
								type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
							}
						},
						grid: {
							top: '10%',
							left: '0',
							right: '0',
							bottom: '0',
							containLabel: true
						},
						xAxis: [{
							type: 'category',
							axisLine: {
								lineStyle: {
									color: '#130C44'
								}
							},

							axisTick: {
								show: false,
								alignWithLabel: true
							},
							axisLabel: {
								color: '#fff',
							},
							data: xData,

						}],
						yAxis: [{
							type: 'value',
							axisLabel: {
								color: '#fff',
							},
							axisLine: {
								lineStyle: {
									color: '#130C44'
								}
							},
							splitLine: {
								lineStyle: {
									color: '#130C44'
								}
							},
						}],
						series: [{
							name: '岗位数量',
							type: 'bar',
							barMaxWidth: '10',
							itemStyle: {
								normal: {
									color: new echarts.graphic.LinearGradient(
										0, 0, 0, 1, [{
												offset: 0,
												color: '#C308CB'
											},
											{
												offset: 1,
												color: '#7704D1'
											}
										]
									)
								},
							},
							data: barData
						}]
					};

					// 使用刚指定的配置项和数据显示图表。
					barChart.setOption(barOption);
					/*窗口自适应，关键代码*/
		        	setTimeout(function (){
		        	    window.onresize = function () {
		        	    	barChart.resize();
		        	    }
		        	},200)

				}
					

				// 时间
				// 获取本地时间
				function timeFn() {
					var nowdate = new Date();
					var y = nowdate.getFullYear();
					var m = nowdate.getMonth() + 1;
					var d = nowdate.getDate();
					var h = nowdate.getHours();
					var minutes = nowdate.getMinutes();
					var s = nowdate.getSeconds();
					m = m < 10 ? '0' + m : m;
					d = d < 10 ? '0' + d : d;
					h = h < 10 ? '0' + h : h;
					minutes = minutes < 10 ? '0' + minutes : minutes;
					s = s < 10 ? '0' + s : s;
					var nowTime = y + '年' + m + '月' + d + '日&nbsp;&nbsp;' + h + ':' + minutes + ':' + s;
					$('.date').html(nowTime)
				}

				timeFn();

				setInterval(function() {
					timeFn()
				}, 1000)

				// 圆环图
				// 年龄
				function pieChart1Fn(age) {
					var pieChart1 = echarts.init(document.getElementById('piechart1'));
					var pieOption1 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#0DB7DB'],
						tooltip: {
							trigger: 'item',
							formatter: "{a} <br/>{b}: {c} ({d}%)"
						},
						legend: {
							bottom: '10',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 50],
							textStyle: {
								color: '#fff',
							},
							data: ['25岁及以下', '25-35', '35-45', '45岁及以上']
						},
						series: [{
							name: '年龄',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								normal: {
									position: 'outside',
									formatter: '{d}%',
									color: '#fff',
								},
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							data: [{
									value: age["25lt"],
									name: '25岁及以下'
								},
								{
									value: age["2535"],
									name: '25-35'
								},
								{
									value: age["3545"],
									name: '35-45'
								},
								{
									value: age["45gt"],
									name: '45岁及以上'
								},

							]
						}]
					}
					pieChart1.setOption(pieOption1);
				}

				// 学历
				function pieChart2Fn(education) {
					var pieChart2 = echarts.init(document.getElementById('piechart2'));
					var pieOption2 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						tooltip: {
							trigger: 'item',
							formatter: "{a} <br/>{b}: {c} ({d}%)"
						},
						legend: {
							bottom: '10',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['高中及以上', '专科及以上', '大学及以上']
						},
						series: [{
							name: '学历',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								normal: {
									//show: false,
									position: 'outside',
									formatter: '{d}%',
									color: '#fff',

								},
							},
							minAngle: 20,
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							data: [{
									value: education["gaozhong"],
									name: '高中及以上'
								},
								{
									value: education["zhuanke"],
									name: '专科及以上'
								},
								{
									value: education["benke"],
									name: '大学及以上'
								},
							]
						}]
					}
					pieChart2.setOption(pieOption2);
				}

				// 政治面貌
				function pieChart3Fn(zzmm) {
					var pieChart3 = echarts.init(document.getElementById('piechart3'));
					var pieOption3 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						tooltip: {
							trigger: 'item',
							formatter: "{a} <br/>{b}: {c} ({d}%)"
						},
						legend: {
							bottom: '10',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['党员', '无党派人士', '非党员的其他党派']
						},
						series: [{
							name: '政治面貌',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								normal: {
									//show: false,
									position: 'outside',
									formatter: '{d}%',
									color: '#fff',

								},
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: zzmm["dangyuan"],
									name: '党员'
								},
								{
									value: zzmm["wudangpai"],
									name: '无党派人士'
								},
								{
									value: zzmm["qitadang"],
									name: '非党员的其他党派'
								},
							]
						}]
					}
					pieChart3.setOption(pieOption3);
				}

				// 就业困难人员
				function pieChart4Fn(kunnan) {
					var pieChart4 = echarts.init(document.getElementById('piechart4'));
					var pieOption4 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						tooltip: {
							trigger: 'item',
							formatter: "{a} <br/>{b}: {c} ({d}%)"
						},
						legend: {
							bottom: '10',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['4050人员', '低保家庭', '零就业家庭']
						},
						series: [{
							name: '就业困难人员',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								normal: {
									//show: false,
									position: 'outside',
									formatter: '{d}%',
									color: '#fff',

								},
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: kunnan["4050"],
									name: '4050人员'
								},
								{
									value: kunnan["dibao"],
									name: '低保家庭'
								},
								{
									value: kunnan["lingjiuye"],
									name: '零就业家庭'
								},

							]
						}]
					}
					pieChart4.setOption(pieOption4);
				}

				// 大学毕业生
				function pieChart5Fn(daxue) {
					var pieChart5 = echarts.init(document.getElementById('piechart5'));
					var pieOption5 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						tooltip: {
							trigger: 'item',
							formatter: "{a} <br/>{b}: {c} ({d}%)"
						},
						legend: {
							bottom: '10',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['男', '女']
						},
						series: [{
							name: '大学毕业生',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								position: 'outside',
								formatter: '{d}%',
								color: '#fff',
								align: 'left',
								verticalAlign: 'bottom'
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: daxue["nan"],
									name: '男'
								},
								{
									value: daxue["nv"],
									name: '女'
								},
							]
						}]
					}
					pieChart5.setOption(pieOption5);
				}

				// 性别
				function pieChart6Fn(sex) {
					var pieChart6 = echarts.init(document.getElementById('piechart6'));
					var pieOption6 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						tooltip: {
							trigger: 'item',
							formatter: "{a} <br/>{b}: {c} ({d}%)"
						},
						legend: {
							bottom: '10',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['男', '女']
						},
						series: [{
							name: '性别',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								position: 'outside',
								formatter: '{d}%',
								color: '#fff',
								align: 'left',
								verticalAlign: 'bottom'
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: sex["nan"],
									name: '男'
								},
								{
									value: sex["nv"],
									name: '女'
								},
							]
						}]
					}
					pieChart6.setOption(pieOption6);
				}

				// 就业状态
				function pieChart7Fn(getjob) {
					var pieChart7 = echarts.init(document.getElementById('piechart7'));
					var pieOption7 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						tooltip: {
							trigger: 'item',
							formatter: "{a} <br/>{b}: {c} ({d}%)"
						},
						legend: {
							bottom: '10',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['失业中', '已就业']
						},
						series: [{
							name: '就业状态',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								position: 'outside',
								formatter: '{d}%',
								color: '#fff',
								align: 'left',
								verticalAlign: 'bottom'
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: getjob["shiye"],
									name: '失业中'
								},
								{
									value: getjob["jiuye"],
									name: '已就业'
								},
							]
						}]
					}
					pieChart7.setOption(pieOption7);
				}

				// 残疾
				function pieChart8Fn(canji) {
					var pieChart8 = echarts.init(document.getElementById('piechart8'));
					var pieOption8 = {
						color: ['#FFB50A', '#8C04FA', '#10BD8F', '#10BD8F', '#0DB7DB'],
						tooltip: {
							trigger: 'item',
							formatter: "{a} <br/>{b}: {c} ({d}%)"
						},
						legend: {
							bottom: '10',
							itemWidth: 10,
							itemHeight: 10,
							borderRadius: 10,
							padding: [10, 20],
							textStyle: {
								color: '#fff',
							},
							data: ['45岁及以上', '45岁以下']
						},
						series: [{
							name: '残疾',
							type: 'pie',
							radius: ['40%', '55%'],
							center: ['50%', '40%'],
							label: {
								position: 'outside',
								formatter: '{d}%',
								color: '#fff',
								align: 'left',
								verticalAlign: 'bottom'
							},
							labelLine: {
								normal: {
									length: 0,
									length2: 15,
									lineStyle: {
										color: '#fff',
									},
								}
							},
							minAngle: 20,
							data: [{
									value: canji["45gt"],
									name: '45岁及以上'
								},
								{
									value: canji["45lt"],
									name: '45岁以下'
								},
							]
						}]
					}
					pieChart8.setOption(pieOption8);
				}

				// 折线图
				function lineChartFn(xlineData, linejobData, linehelpData, linetrainData, linepublicData) {
					var lineChart = echarts.init(document.getElementById('linechart'));
					var lineOption = {
						color: ['#DD5858', '#00B37A', '#D79D4B', '#40B3E2'],
						tooltip: {
							trigger: 'axis'
						},
						legend: {
							top: 10,
							textStyle: {
								color: '#fff',
							},
							data: ['找工作', '找帮助', '找培训', '公共服务']
						},
						grid: {
							top: '15%',
							left: '5%',
							right: '0',
							bottom: '10%',
							containLabel: true
						},
						xAxis: [{
							type: 'category',
							axisLine: {
								lineStyle: {
									color: '#130C44'
								}
							},

							axisTick: {
								show: false,
								alignWithLabel: true
							},
							axisLabel: {
								color: '#fff',
								rotate: 50,
							},

							data: xlineData

						}],

						yAxis: {
							type: 'value',
							axisLabel: {
								color: '#fff',
							},
							axisLine: {
								lineStyle: {
									color: '#130C44'
								}
							},
							splitLine: {
								lineStyle: {
									color: '#130C44'
								}
							},

						},
						series: [{
								name: '找工作',
								type: 'line',
								data: linejobData
							},
							{
								name: '找帮助',
								type: 'line',
								data: linehelpData
							},
							{
								name: '找培训',
								type: 'line',
								data: linetrainData
							},
							{
								name: '公共服务',
								type: 'line',
								data: linepublicData
							}

						]
					};

					lineChart.setOption(lineOption);
				}

			})

			function formatDateTime(inputTime) {
				var date = new Date(inputTime);

				var y = date.getFullYear();
				var m = date.getMonth() + 1;
				m = m < 10 ? ('0' + m) : m;
				var d = date.getDate();
				d = d < 10 ? ('0' + d) : d;
				var h = date.getHours();
				h = h < 10 ? ('0' + h) : h;
				var minute = date.getMinutes();
				var second = date.getSeconds();
				minute = minute < 10 ? ('0' + minute) : minute;
				second = second < 10 ? ('0' + second) : second;
				return y + '-' + m + '-' + d + ' ' + h + ':' + minute + ':' + second;
			}

			// 弹窗
			$('.item-level-two li').each(function() {
				$(this).click(function() {
					layer.open({
						type: 2,
						title: $(this).attr('data-title'),
						shadeClose: true,
						shade: 0.8,
						offset: '10%',
						area: ['80%', '80%'],
						content: $(this).attr('data-href') //iframe的url
					});
				})
			})

			// 数字滚动增加特效
			function updateNum(oldNum, newNum) {
				//console.log(oldNum,newNum)
				// 将数字转为字符串
				var oldNum = oldNum.toString();
				var newNum = newNum.toString();

				numberHTML = '';
				//	console.log(newNum.length)
				for(var i = newNum.length - 1; i >= 0; i--) {
					if(oldNum[i] !== newNum[i]) {
						if(oldNum[i] == undefined || oldNum[i] == null || oldNum[i] == "") {
							if(newNum[i] != ",")
								numberHTML = "<li class=\"group active\">" +
								"<span class=\"old\">0</span>" +
								"<span class=\"new\">" + newNum[i] + "</span></li>" + numberHTML;
							else
								numberHTML = "<li class=\"group active\">" +
								"<span class=\"old\">,</span>" +
								"<span class=\"new\">" + newNum[i] + "</span></li>" + numberHTML;
						} else
							numberHTML = "<li class=\"group active\">" +
							"<span class=\"old\">" + oldNum[i] + "</span>" +
							"<span class=\"new\">" + newNum[i] + "</span></li>" + numberHTML;
					} else {
						numberHTML = "<li class=\"group\">" +
							"<span class=\"old\">" + oldNum[i] + "</span>" +
							"<span class=\"new\">" + newNum[i] + "</span></li>" + numberHTML;
					}

				}
				//console.log(numberHTML);//return numberHTML;
				return numberHTML;
			}
			
			
			
		</script>
	</body>

</html>